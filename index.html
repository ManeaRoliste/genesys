<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <script>import 'dotenv/config'</script>
    <script type="text/javascript" src="https://slowe.github.io/stuquery/js/stuquery.js"></script>
    <script type="text/javascript" src="https://slowe.github.io/stuquery/js/stuquery.hexmap.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="mapgen.js"></script>
    <script type="text/javascript" src="mapclass.js"></script>
    <script type="text/javascript" src="majGit.js"></script>
    <link rel="stylesheet" href="stuquery.hexmap.css">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div id="hexmap-8" class="ex-8">
      <div class="terrains">Terrains</div>
      <div class="politique">Politique</div>
      <div class="exploration">Exploration</div>
    <code>
    </code>
    </div>
  </body>
</html>

<script>
  let sizeQ = 30;
  let sizeR = 30;
  let minAleaK = sizeQ/2-3;
  let maxAleaK = minAleaK+8;
  let aleaK = Math.floor(Math.random()*8)+minAleaK;
  let hexMapGenerated = generateHexMap(aleaK, sizeQ, sizeR);
  let placeHexmap = document.querySelector('code');
  placeHexmap.append(hexMapGenerated);
  let hexmap = S.hexmap('hexmap-8');

  S(document).ready(function(){
    hexmap.positionHexes().resize();

    setHexMap(hexmap, aleaK, sizeQ, sizeR, minAleaK, maxAleaK);

    fetchHexmap(hexmap);
  });

  hexmap.on('click', function(e){
    hexmap.hexes[e.hex.id].setClass(hexmap.hexes[e.hex.id].terrain);
    hexmap.hexes[e.hex.id].explore = 'explored';
    console.log(hexmap.hexes[e.hex.id]);
    hexmap.setContent(function(id,hex) {
      if(hex.explore == 'explored')
      {
        str = '';
      }
      else
      {
        str = '<div class="token">';
        str += '<div class="explorer">'+'Explorer'+'</div>';
        str += '</div>';
      }
    return str;
    fetchHexmap(hexmap);
  });
});
</script>
